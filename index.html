<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöó H·ªá th·ªëng c·∫£nh b√°o t√†i x·∫ø</title>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #0a0a0a;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            color: #ffffff;
        }

        .container {
            background: #141414;
            border-radius: 24px;
            border: 1px solid #2a2a2a;
            overflow: hidden;
            max-width: 1400px;
            width: 100%;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.8);
        }

        .header {
            background: linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%);
            padding: 32px 40px;
            border-bottom: 1px solid #2a2a2a;
            display: flex;
            align-items: center;
            gap: 24px;
        }

        .header-logo {
            width: 80px;
            height: 80px;
            flex-shrink: 0;
        }

        .header-content {
            flex: 1;
        }

        .header h1 {
            font-size: 1.75em;
            font-weight: 600;
            margin-bottom: 8px;
            background: linear-gradient(135deg, #ffffff 0%, #a0a0a0 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            color: #888;
            font-size: 0.95em;
            font-weight: 400;
        }

        @media (max-width: 640px) {
            .header {
                flex-direction: column;
                text-align: center;
            }
        }

        .main-content {
            padding: 40px;
            display: grid;
            grid-template-columns: 1fr 320px;
            gap: 30px;
        }

        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        .video-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .video-container {
            position: relative;
            background: #000;
            border-radius: 16px;
            overflow: hidden;
            border: 1px solid #2a2a2a;
            aspect-ratio: 16/9;
        }

        video {
            width: 100%;
            height: 100%;
            display: block;
            object-fit: cover;
        }

        canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .alert-drowsy, .alert-hands {
            position: absolute;
            left: 0;
            right: 0;
            padding: 24px;
            text-align: center;
            font-size: 1.25em;
            font-weight: 600;
            animation: alertPulse 1s infinite;
            display: none;
            z-index: 10;
            backdrop-filter: blur(8px);
        }

        .alert-drowsy {
            top: 0;
            background: rgba(220, 38, 38, 0.95);
            color: white;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
        }

        .alert-hands {
            bottom: 0;
            background: rgba(245, 158, 11, 0.95);
            color: white;
            border-top: 2px solid rgba(255, 255, 255, 0.2);
        }

        @keyframes alertPulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.85; transform: scale(0.98); }
        }

        .info-overlay {
            position: absolute;
            top: 16px;
            left: 16px;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            padding: 12px 16px;
            border-radius: 12px;
            font-size: 0.85em;
            z-index: 5;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .info-overlay div {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 6px;
        }

        .info-overlay div:last-child {
            margin-bottom: 0;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #10b981;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7); }
            50% { opacity: 0.8; box-shadow: 0 0 0 4px rgba(16, 185, 129, 0); }
        }

        .fps-counter {
            position: absolute;
            top: 16px;
            right: 16px;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 0.85em;
            font-weight: 600;
            z-index: 5;
            color: #10b981;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            padding: 32px;
            font-size: 1em;
            color: #888;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            z-index: 20;
            border: 1px solid #2a2a2a;
        }

        .controls {
            display: flex;
            gap: 12px;
        }

        button {
            flex: 1;
            padding: 16px;
            font-size: 0.95em;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 600;
            font-family: inherit;
        }

        .btn-start {
            background: #10b981;
            color: white;
        }

        .btn-start:hover:not(:disabled) {
            background: #059669;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
        }

        .btn-stop {
            background: #ef4444;
            color: white;
        }

        .btn-stop:hover:not(:disabled) {
            background: #dc2626;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4);
        }

        .btn-stop:disabled,
        .btn-start:disabled {
            background: #2a2a2a;
            color: #666;
            cursor: not-allowed;
            transform: none;
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .stat-card {
            background: #1a1a1a;
            border: 1px solid #2a2a2a;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            transition: all 0.2s ease;
        }

        .stat-card:hover {
            border-color: #3a3a3a;
            transform: translateY(-2px);
        }

        .stat-card h3 {
            font-size: 0.8em;
            color: #888;
            margin-bottom: 8px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .stat-card .value {
            font-size: 2em;
            font-weight: 700;
            background: linear-gradient(135deg, #ffffff 0%, #a0a0a0 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .settings-panel {
            background: #1a1a1a;
            border: 1px solid #2a2a2a;
            border-radius: 16px;
            padding: 24px;
        }

        .settings-title {
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 20px;
            color: #fff;
        }

        .setting-item {
            margin-bottom: 20px;
        }

        .setting-item:last-child {
            margin-bottom: 0;
        }

        .setting-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            font-size: 0.85em;
            color: #aaa;
        }

        .setting-value {
            color: #10b981;
            font-weight: 600;
        }

        input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #2a2a2a;
            outline: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #10b981;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            background: #059669;
            transform: scale(1.2);
        }

        input[type="range"]::-moz-range-thumb {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #10b981;
            cursor: pointer;
            border: none;
            transition: all 0.2s ease;
        }

        input[type="range"]::-moz-range-thumb:hover {
            background: #059669;
            transform: scale(1.2);
        }

        input[type="number"] {
            width: 70px;
            padding: 8px 12px;
            background: #0a0a0a;
            border: 1px solid #2a2a2a;
            border-radius: 8px;
            color: #fff;
            font-size: 0.9em;
            font-family: inherit;
            outline: none;
            transition: all 0.2s ease;
        }

        input[type="number"]:focus {
            border-color: #10b981;
        }

        .error-message {
            background: rgba(239, 68, 68, 0.15);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: #fca5a5;
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 20px;
            display: none;
            font-size: 0.9em;
        }

        .divider {
            height: 1px;
            background: #2a2a2a;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-content">
                <h1>üöó H·ªá th·ªëng c·∫£nh b√°o t√†i x·∫ø</h1>
                <p>Ph√°t hi·ªán ng·ªß g·∫≠t v√† tay r·ªùi v√¥ lƒÉng th·ªùi gian th·ª±c</p>
            </div>
        </div>

        <div class="main-content">
            <div class="video-section">
                <div id="errorMessage" class="error-message"></div>

                <div class="video-container">
                    <video id="video" autoplay playsinline></video>
                    <canvas id="canvas"></canvas>
                    
                    <div id="loading" class="loading">
                        <div>üì∏ H√£y cho ph√©p s·ª≠ d·ª•ng camera ƒë·ªÉ b·∫Øt ƒë·∫ßu gi√°m s√°t</div>
                    </div>
                    
                    <div id="alertDrowsy" class="alert-drowsy">
                        ‚ö†Ô∏è C·∫¢NH B√ÅO: T√ÄI X·∫æ NG·ª¶ G·∫¨T
                    </div>
                    
                    <div id="alertHands" class="alert-hands">
                        ‚ö†Ô∏è C·∫¢NH B√ÅO: TAY R·ªúI V√î LƒÇNG
                    </div>

                    <div class="info-overlay">
                        <div>
                            <span>EAR</span>
                            <span id="earValue" style="color: #10b981; font-weight: 600;">0.00</span>
                        </div>
                        <div>
                            <div class="status-dot"></div>
                            <span id="statusText">ƒêang ch·ªù...</span>
                        </div>
                    </div>

                    <div class="fps-counter">
                        <span id="fpsValue">0</span> FPS
                    </div>
                </div>

                <div class="controls">
                    <button class="btn-start" id="startBtn">B·∫Øt ƒë·∫ßu gi√°m s√°t</button>
                    <button class="btn-stop" id="stopBtn" disabled>D·ª´ng l·∫°i</button>
                </div>
            </div>

            <div class="sidebar">
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>M·∫Øt nh·∫Øm</h3>
                        <div class="value" id="drowsyFramesCount">0</div>
                    </div>
                    <div class="stat-card">
                        <h3>Tay r·ªùi</h3>
                        <div class="value" id="handOffFramesCount">0</div>
                    </div>
                    <div class="stat-card">
                        <h3>CB ng·ªß g·∫≠t</h3>
                        <div class="value" id="drowsyAlerts">0</div>
                    </div>
                    <div class="stat-card">
                        <h3>CB tay r·ªùi</h3>
                        <div class="value" id="handAlerts">0</div>
                    </div>
                </div>

                <div class="settings-panel">
                    <div class="settings-title">‚öôÔ∏è C√†i ƒë·∫∑t</div>
                    
                    <div class="setting-item">
                        <div class="setting-label">
                            <span>√Çm l∆∞·ª£ng</span>
                            <span class="setting-value" id="volumeValue">100%</span>
                        </div>
                        <input type="range" id="volumeSlider" min="0" max="100" value="100">
                    </div>

                    <div class="divider"></div>

                    <div class="setting-item">
                        <div class="setting-label">
                            <span>Ng∆∞·ª°ng EAR</span>
                            <input type="number" id="earThreshold" value="0.25" step="0.01" min="0.1" max="0.4">
                        </div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-label">
                            <span>Frames ng·ªß g·∫≠t</span>
                            <input type="number" id="drowsyFrames" value="20" step="5" min="5" max="60">
                        </div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-label">
                            <span>Frames tay r·ªùi</span>
                            <input type="number" id="handFrames" value="30" step="5" min="10" max="90">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <audio id="drowsyAlert" preload="auto">
        <source src="https://files.catbox.moe/ou9wbx.mp3" type="audio/mpeg">
    </audio>
    <audio id="handOffAlert" preload="auto">
        <source src="https://files.catbox.moe/9jjuj9.mp3" type="audio/mpeg">
    </audio>

    <script>
        let CONFIG = {
            EAR_THRESHOLD: 0.25,
            CONSECUTIVE_FRAMES: 20,
            HAND_OFF_FRAMES: 30,
            VOLUME: 1.0
        };

        let faceMesh, hands, camera;
        let earCounter = 0;
        let handOffCounter = 0;
        let drowsyAlertCount = 0;
        let handAlertCount = 0;
        let isDrowsyAlerting = false;
        let isHandAlerting = false;
        let isRunning = false;
        let lastFrameTime = Date.now();
        let fps = 0;
        let faceResults = null;
        let handsResults = null;

        let drowsyAlertAudio = document.getElementById('drowsyAlert');
        let handOffAlertAudio = document.getElementById('handOffAlert');

        const LEFT_EYE = [362, 385, 387, 263, 373, 380];
        const RIGHT_EYE = [33, 160, 158, 133, 153, 144];

        function playDrowsyAlert() {
            try {
                drowsyAlertAudio.volume = CONFIG.VOLUME;
                drowsyAlertAudio.currentTime = 0;
                drowsyAlertAudio.play().catch(e => console.error('L·ªói ph√°t √¢m thanh ng·ªß g·∫≠t:', e));
            } catch (e) {
                console.error('L·ªói ph√°t √¢m thanh ng·ªß g·∫≠t:', e);
            }
        }

        function playHandOffAlert() {
            try {
                handOffAlertAudio.volume = CONFIG.VOLUME;
                handOffAlertAudio.currentTime = 0;
                handOffAlertAudio.play().catch(e => console.error('L·ªói ph√°t √¢m thanh tay r·ªùi:', e));
            } catch (e) {
                console.error('L·ªói ph√°t √¢m thanh tay r·ªùi:', e);
            }
        }

        function showError(message) {
            const errorDiv = document.getElementById('errorMessage');
            errorDiv.textContent = '‚ùå ' + message;
            errorDiv.style.display = 'block';
            setTimeout(() => {
                errorDiv.style.display = 'none';
            }, 5000);
        }

        function distance(p1, p2) {
            return Math.sqrt(Math.pow(p2.x - p1.x, 2) + Math.pow(p2.y - p1.y, 2));
        }

        function calculateEAR(eyeLandmarks) {
            const A = distance(eyeLandmarks[1], eyeLandmarks[5]);
            const B = distance(eyeLandmarks[2], eyeLandmarks[4]);
            const C = distance(eyeLandmarks[0], eyeLandmarks[3]);
            return (A + B) / (2.0 * C);
        }

        function getEyeLandmarks(landmarks, eyeIndices) {
            return eyeIndices.map(idx => landmarks[idx]);
        }

        function updateFPS() {
            const now = Date.now();
            const delta = now - lastFrameTime;
            fps = Math.round(1000 / delta);
            lastFrameTime = now;
            document.getElementById('fpsValue').textContent = fps;
        }

        function renderCanvas() {
            if (!isRunning) return;

            const video = document.getElementById('video');
            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');

            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;

            ctx.save();
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            if (faceResults && faceResults.multiFaceLandmarks && faceResults.multiFaceLandmarks.length > 0) {
                const landmarks = faceResults.multiFaceLandmarks[0];

                window.drawConnectors(ctx, landmarks, window.FACEMESH_TESSELATION, {color: '#3a3a3a50', lineWidth: 1});
                window.drawConnectors(ctx, landmarks, window.FACEMESH_RIGHT_EYE, {color: '#10b981', lineWidth: 2});
                window.drawConnectors(ctx, landmarks, window.FACEMESH_LEFT_EYE, {color: '#10b981', lineWidth: 2});

                const leftEye = getEyeLandmarks(landmarks, LEFT_EYE);
                const rightEye = getEyeLandmarks(landmarks, RIGHT_EYE);
                
                const leftEAR = calculateEAR(leftEye);
                const rightEAR = calculateEAR(rightEye);
                const ear = (leftEAR + rightEAR) / 2.0;

                document.getElementById('earValue').textContent = ear.toFixed(2);

                if (ear < CONFIG.EAR_THRESHOLD) {
                    earCounter++;
                    
                    if (earCounter >= CONFIG.CONSECUTIVE_FRAMES) {
                        if (!isDrowsyAlerting) {
                            isDrowsyAlerting = true;
                            drowsyAlertCount++;
                            document.getElementById('drowsyAlerts').textContent = drowsyAlertCount;
                            document.getElementById('alertDrowsy').style.display = 'block';
                            playDrowsyAlert();
                        }
                    }
                } else {
                    earCounter = 0;
                    isDrowsyAlerting = false;
                    document.getElementById('alertDrowsy').style.display = 'none';
                }

                document.getElementById('drowsyFramesCount').textContent = earCounter;
            }

            if (handsResults && handsResults.multiHandLandmarks && handsResults.multiHandLandmarks.length > 0) {
                for (const landmarks of handsResults.multiHandLandmarks) {
                    window.drawConnectors(ctx, landmarks, window.HANDS_CONNECTIONS, {color: '#10b981', lineWidth: 3});
                    window.drawLandmarks(ctx, landmarks, {color: '#ef4444', lineWidth: 1, radius: 3});
                }
            }

            ctx.restore();
            updateFPS();
        }

        function onFaceResults(results) {
            if (!isRunning) return;
            faceResults = results;
            renderCanvas();
        }

        function onHandsResults(results) {
            if (!isRunning) return;
            handsResults = results;

            let handsDetected = false;

            if (results.multiHandLandmarks && results.multiHandLandmarks.length > 0) {
                handsDetected = true;
            }

            if (!handsDetected) {
                handOffCounter++;
                
                if (handOffCounter >= CONFIG.HAND_OFF_FRAMES) {
                    if (!isHandAlerting) {
                        isHandAlerting = true;
                        handAlertCount++;
                        document.getElementById('handAlerts').textContent = handAlertCount;
                        document.getElementById('alertHands').style.display = 'block';
                        playHandOffAlert();
                    }
                }
                document.getElementById('statusText').textContent = 'Kh√¥ng ph√°t hi·ªán tay';
            } else {
                handOffCounter = 0;
                isHandAlerting = false;
                document.getElementById('alertHands').style.display = 'none';
                document.getElementById('statusText').textContent = 'Tay tr√™n v√¥ lƒÉng';
            }

            document.getElementById('handOffFramesCount').textContent = handOffCounter;
        }

        function initFaceMesh() {
            try {
                faceMesh = new FaceMesh({
                    locateFile: (file) => `https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/${file}`
                });

                faceMesh.setOptions({
                    maxNumFaces: 1,
                    refineLandmarks: true,
                    minDetectionConfidence: 0.5,
                    minTrackingConfidence: 0.5
                });

                faceMesh.onResults(onFaceResults);
            } catch (e) {
                showError('L·ªói kh·ªüi t·∫°o Face Mesh: ' + e.message);
                throw e;
            }
        }

        function initHands() {
            try {
                hands = new Hands({
                    locateFile: (file) => `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}`
                });

                hands.setOptions({
                    maxNumHands: 2,
                    modelComplexity: 1,
                    minDetectionConfidence: 0.5,
                    minTrackingConfidence: 0.5
                });

                hands.onResults(onHandsResults);
            } catch (e) {
                showError('L·ªói kh·ªüi t·∫°o Hands: ' + e.message);
                throw e;
            }
        }

        async function startCamera() {
            const video = document.getElementById('video');
            
            try {
                camera = new Camera(video, {
                    onFrame: async () => {
                        if (isRunning) {
                            await faceMesh.send({image: video});
                            await hands.send({image: video});
                        }
                    },
                    width: 1280,
                    height: 720
                });

                await camera.start();
                document.getElementById('loading').style.display = 'none';
            } catch (e) {
                showError('L·ªói kh·ªüi ƒë·ªông ho·∫∑c t·ª´ ch·ªëi quy·ªÅn s·ª≠ d·ª•ng camera: ' + e.message);
                document.getElementById('loading').style.display = 'none';
                throw e;
            }
        }

        async function startMonitoring() {
            try {
                isRunning = true;
                document.getElementById('startBtn').disabled = true;
                document.getElementById('stopBtn').disabled = false;
                document.getElementById('loading').style.display = 'block';
                
                CONFIG.EAR_THRESHOLD = parseFloat(document.getElementById('earThreshold').value);
                CONFIG.CONSECUTIVE_FRAMES = parseInt(document.getElementById('drowsyFrames').value);
                CONFIG.HAND_OFF_FRAMES = parseInt(document.getElementById('handFrames').value);
                
                if (!faceMesh || !hands) {
                    initFaceMesh();
                    initHands();
                }

                if (!camera) {
                    await startCamera();
                }
            } catch (e) {
                showError('L·ªói kh·ªüi ƒë·ªông: ' + e.message);
                stopMonitoring();
            }
        }

        function stopMonitoring() {
            isRunning = false;
            document.getElementById('startBtn').disabled = false;
            document.getElementById('stopBtn').disabled = true;
            
            if (camera) {
                camera.stop();
                camera = null;
            }
            
            const video = document.getElementById('video');
            if (video.srcObject) {
                const tracks = video.srcObject.getTracks();
                tracks.forEach(track => track.stop());
                video.srcObject = null;
            }

            drowsyAlertAudio.pause();
            drowsyAlertAudio.currentTime = 0;
            handOffAlertAudio.pause();
            handOffAlertAudio.currentTime = 0;

            
            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            earCounter = 0;
            handOffCounter = 0;
            isDrowsyAlerting = false;
            isHandAlerting = false;
            faceResults = null;
            handsResults = null;
            
            document.getElementById('alertDrowsy').style.display = 'none';
            document.getElementById('alertHands').style.display = 'none';
            document.getElementById('statusText').textContent = 'ƒê√£ d·ª´ng';
            document.getElementById('earValue').textContent = '0.00';
            document.getElementById('fpsValue').textContent = '0';
            document.getElementById('loading').style.display = 'block';
            document.getElementById('loading').innerHTML = '<div>üì∏ H√£y cho ph√©p s·ª≠ d·ª•ng camera ƒë·ªÉ b·∫Øt ƒë·∫ßu gi√°m s√°t</div>';
        }
        
        document.getElementById('startBtn').addEventListener('click', startMonitoring);
        document.getElementById('stopBtn').addEventListener('click', stopMonitoring);

        document.getElementById('volumeSlider').addEventListener('input', (e) => {
            const volume = e.target.value;
            CONFIG.VOLUME = volume / 100;
            document.getElementById('volumeValue').textContent = volume + '%';
        });
        
        document.getElementById('earThreshold').addEventListener('input', (e) => {
            const value = parseFloat(e.target.value);
            if (value >= 0.1 && value <= 0.4) {
                CONFIG.EAR_THRESHOLD = value;
            }
        });

        document.getElementById('drowsyFrames').addEventListener('input', (e) => {
            const value = parseInt(e.target.value);
            if (value >= 5 && value <= 60) {
                CONFIG.CONSECUTIVE_FRAMES = value;
            }
        });

        document.getElementById('handFrames').addEventListener('input', (e) => {
            const value = parseInt(e.target.value);
            if (value >= 10 && value <= 90) {
                CONFIG.HAND_OFF_FRAMES = value;
            }
        });
        window.addEventListener('load', () => {
            console.log('üöó H·ªá th·ªëng c·∫£nh b√°o t√†i x·∫ø ');
        });
    </script>
</body>
</html>
  
